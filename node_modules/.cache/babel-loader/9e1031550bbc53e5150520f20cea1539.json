{"ast":null,"code":"import Vue from 'vue';\nimport { addClass, removeClass } from 'element-ui/src/utils/dom';\nlet hasModal = false;\nlet hasInitZIndex = false;\nlet zIndex;\n\nconst getModal = function () {\n  if (Vue.prototype.$isServer) return;\n  let modalDom = PopupManager.modalDom;\n\n  if (modalDom) {\n    hasModal = true;\n  } else {\n    hasModal = false;\n    modalDom = document.createElement('div');\n    PopupManager.modalDom = modalDom;\n    modalDom.addEventListener('touchmove', function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    });\n    modalDom.addEventListener('click', function () {\n      PopupManager.doOnModalClick && PopupManager.doOnModalClick();\n    });\n  }\n\n  return modalDom;\n};\n\nconst instances = {};\nconst PopupManager = {\n  modalFade: true,\n  getInstance: function (id) {\n    return instances[id];\n  },\n  register: function (id, instance) {\n    if (id && instance) {\n      instances[id] = instance;\n    }\n  },\n  deregister: function (id) {\n    if (id) {\n      instances[id] = null;\n      delete instances[id];\n    }\n  },\n  nextZIndex: function () {\n    return PopupManager.zIndex++;\n  },\n  modalStack: [],\n  doOnModalClick: function () {\n    const topItem = PopupManager.modalStack[PopupManager.modalStack.length - 1];\n    if (!topItem) return;\n    const instance = PopupManager.getInstance(topItem.id);\n\n    if (instance && instance.closeOnClickModal) {\n      instance.close();\n    }\n  },\n  openModal: function (id, zIndex, dom, modalClass, modalFade) {\n    if (Vue.prototype.$isServer) return;\n    if (!id || zIndex === undefined) return;\n    this.modalFade = modalFade;\n    const modalStack = this.modalStack;\n\n    for (let i = 0, j = modalStack.length; i < j; i++) {\n      const item = modalStack[i];\n\n      if (item.id === id) {\n        return;\n      }\n    }\n\n    const modalDom = getModal();\n    addClass(modalDom, 'v-modal');\n\n    if (this.modalFade && !hasModal) {\n      addClass(modalDom, 'v-modal-enter');\n    }\n\n    if (modalClass) {\n      let classArr = modalClass.trim().split(/\\s+/);\n      classArr.forEach(item => addClass(modalDom, item));\n    }\n\n    setTimeout(() => {\n      removeClass(modalDom, 'v-modal-enter');\n    }, 200);\n\n    if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\n      dom.parentNode.appendChild(modalDom);\n    } else {\n      document.body.appendChild(modalDom);\n    }\n\n    if (zIndex) {\n      modalDom.style.zIndex = zIndex;\n    }\n\n    modalDom.tabIndex = 0;\n    modalDom.style.display = '';\n    this.modalStack.push({\n      id: id,\n      zIndex: zIndex,\n      modalClass: modalClass\n    });\n  },\n  closeModal: function (id) {\n    const modalStack = this.modalStack;\n    const modalDom = getModal();\n\n    if (modalStack.length > 0) {\n      const topItem = modalStack[modalStack.length - 1];\n\n      if (topItem.id === id) {\n        if (topItem.modalClass) {\n          let classArr = topItem.modalClass.trim().split(/\\s+/);\n          classArr.forEach(item => removeClass(modalDom, item));\n        }\n\n        modalStack.pop();\n\n        if (modalStack.length > 0) {\n          modalDom.style.zIndex = modalStack[modalStack.length - 1].zIndex;\n        }\n      } else {\n        for (let i = modalStack.length - 1; i >= 0; i--) {\n          if (modalStack[i].id === id) {\n            modalStack.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    if (modalStack.length === 0) {\n      if (this.modalFade) {\n        addClass(modalDom, 'v-modal-leave');\n      }\n\n      setTimeout(() => {\n        if (modalStack.length === 0) {\n          if (modalDom.parentNode) modalDom.parentNode.removeChild(modalDom);\n          modalDom.style.display = 'none';\n          PopupManager.modalDom = undefined;\n        }\n\n        removeClass(modalDom, 'v-modal-leave');\n      }, 200);\n    }\n  }\n};\nObject.defineProperty(PopupManager, 'zIndex', {\n  configurable: true,\n\n  get() {\n    if (!hasInitZIndex) {\n      zIndex = zIndex || (Vue.prototype.$ELEMENT || {}).zIndex || 2000;\n      hasInitZIndex = true;\n    }\n\n    return zIndex;\n  },\n\n  set(value) {\n    zIndex = value;\n  }\n\n});\n\nconst getTopPopup = function () {\n  if (Vue.prototype.$isServer) return;\n\n  if (PopupManager.modalStack.length > 0) {\n    const topPopup = PopupManager.modalStack[PopupManager.modalStack.length - 1];\n    if (!topPopup) return;\n    const instance = PopupManager.getInstance(topPopup.id);\n    return instance;\n  }\n};\n\nif (!Vue.prototype.$isServer) {\n  // handle `esc` key when the popup is shown\n  window.addEventListener('keydown', function (event) {\n    if (event.keyCode === 27) {\n      const topPopup = getTopPopup();\n\n      if (topPopup && topPopup.closeOnPressEscape) {\n        topPopup.handleClose ? topPopup.handleClose() : topPopup.handleAction ? topPopup.handleAction('cancel') : topPopup.close();\n      }\n    }\n  });\n}\n\nexport default PopupManager;","map":{"version":3,"names":["Vue","addClass","removeClass","hasModal","hasInitZIndex","zIndex","getModal","prototype","$isServer","modalDom","PopupManager","document","createElement","addEventListener","event","preventDefault","stopPropagation","doOnModalClick","instances","modalFade","getInstance","id","register","instance","deregister","nextZIndex","modalStack","topItem","length","closeOnClickModal","close","openModal","dom","modalClass","undefined","i","j","item","classArr","trim","split","forEach","setTimeout","parentNode","nodeType","appendChild","body","style","tabIndex","display","push","closeModal","pop","splice","removeChild","Object","defineProperty","configurable","get","$ELEMENT","set","value","getTopPopup","topPopup","window","keyCode","closeOnPressEscape","handleClose","handleAction"],"sources":["/home/work/PhpstormProjects/hello-world/node_modules/element-ui/src/utils/popup/popup-manager.js"],"sourcesContent":["import Vue from 'vue';\nimport { addClass, removeClass } from 'element-ui/src/utils/dom';\n\nlet hasModal = false;\nlet hasInitZIndex = false;\nlet zIndex;\n\nconst getModal = function() {\n  if (Vue.prototype.$isServer) return;\n  let modalDom = PopupManager.modalDom;\n  if (modalDom) {\n    hasModal = true;\n  } else {\n    hasModal = false;\n    modalDom = document.createElement('div');\n    PopupManager.modalDom = modalDom;\n\n    modalDom.addEventListener('touchmove', function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n    });\n\n    modalDom.addEventListener('click', function() {\n      PopupManager.doOnModalClick && PopupManager.doOnModalClick();\n    });\n  }\n\n  return modalDom;\n};\n\nconst instances = {};\n\nconst PopupManager = {\n  modalFade: true,\n\n  getInstance: function(id) {\n    return instances[id];\n  },\n\n  register: function(id, instance) {\n    if (id && instance) {\n      instances[id] = instance;\n    }\n  },\n\n  deregister: function(id) {\n    if (id) {\n      instances[id] = null;\n      delete instances[id];\n    }\n  },\n\n  nextZIndex: function() {\n    return PopupManager.zIndex++;\n  },\n\n  modalStack: [],\n\n  doOnModalClick: function() {\n    const topItem = PopupManager.modalStack[PopupManager.modalStack.length - 1];\n    if (!topItem) return;\n\n    const instance = PopupManager.getInstance(topItem.id);\n    if (instance && instance.closeOnClickModal) {\n      instance.close();\n    }\n  },\n\n  openModal: function(id, zIndex, dom, modalClass, modalFade) {\n    if (Vue.prototype.$isServer) return;\n    if (!id || zIndex === undefined) return;\n    this.modalFade = modalFade;\n\n    const modalStack = this.modalStack;\n\n    for (let i = 0, j = modalStack.length; i < j; i++) {\n      const item = modalStack[i];\n      if (item.id === id) {\n        return;\n      }\n    }\n\n    const modalDom = getModal();\n\n    addClass(modalDom, 'v-modal');\n    if (this.modalFade && !hasModal) {\n      addClass(modalDom, 'v-modal-enter');\n    }\n    if (modalClass) {\n      let classArr = modalClass.trim().split(/\\s+/);\n      classArr.forEach(item => addClass(modalDom, item));\n    }\n    setTimeout(() => {\n      removeClass(modalDom, 'v-modal-enter');\n    }, 200);\n\n    if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\n      dom.parentNode.appendChild(modalDom);\n    } else {\n      document.body.appendChild(modalDom);\n    }\n\n    if (zIndex) {\n      modalDom.style.zIndex = zIndex;\n    }\n    modalDom.tabIndex = 0;\n    modalDom.style.display = '';\n\n    this.modalStack.push({ id: id, zIndex: zIndex, modalClass: modalClass });\n  },\n\n  closeModal: function(id) {\n    const modalStack = this.modalStack;\n    const modalDom = getModal();\n\n    if (modalStack.length > 0) {\n      const topItem = modalStack[modalStack.length - 1];\n      if (topItem.id === id) {\n        if (topItem.modalClass) {\n          let classArr = topItem.modalClass.trim().split(/\\s+/);\n          classArr.forEach(item => removeClass(modalDom, item));\n        }\n\n        modalStack.pop();\n        if (modalStack.length > 0) {\n          modalDom.style.zIndex = modalStack[modalStack.length - 1].zIndex;\n        }\n      } else {\n        for (let i = modalStack.length - 1; i >= 0; i--) {\n          if (modalStack[i].id === id) {\n            modalStack.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    if (modalStack.length === 0) {\n      if (this.modalFade) {\n        addClass(modalDom, 'v-modal-leave');\n      }\n      setTimeout(() => {\n        if (modalStack.length === 0) {\n          if (modalDom.parentNode) modalDom.parentNode.removeChild(modalDom);\n          modalDom.style.display = 'none';\n          PopupManager.modalDom = undefined;\n        }\n        removeClass(modalDom, 'v-modal-leave');\n      }, 200);\n    }\n  }\n};\n\nObject.defineProperty(PopupManager, 'zIndex', {\n  configurable: true,\n  get() {\n    if (!hasInitZIndex) {\n      zIndex = zIndex || (Vue.prototype.$ELEMENT || {}).zIndex || 2000;\n      hasInitZIndex = true;\n    }\n    return zIndex;\n  },\n  set(value) {\n    zIndex = value;\n  }\n});\n\nconst getTopPopup = function() {\n  if (Vue.prototype.$isServer) return;\n  if (PopupManager.modalStack.length > 0) {\n    const topPopup = PopupManager.modalStack[PopupManager.modalStack.length - 1];\n    if (!topPopup) return;\n    const instance = PopupManager.getInstance(topPopup.id);\n\n    return instance;\n  }\n};\n\nif (!Vue.prototype.$isServer) {\n  // handle `esc` key when the popup is shown\n  window.addEventListener('keydown', function(event) {\n    if (event.keyCode === 27) {\n      const topPopup = getTopPopup();\n\n      if (topPopup && topPopup.closeOnPressEscape) {\n        topPopup.handleClose\n          ? topPopup.handleClose()\n          : (topPopup.handleAction ? topPopup.handleAction('cancel') : topPopup.close());\n      }\n    }\n  });\n}\n\nexport default PopupManager;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}