{"ast":null,"code":"import { mapActions, mapGetters } from 'vuex';\nimport { db } from '@/services/db';\nimport GenresBook from \"@/components/children/GenresBook\";\nimport { eventBus } from '@/main';\nexport default {\n  components: {\n    GenresBook\n  },\n\n  data() {\n    return {\n      id: 10,\n      title: '',\n      genre: '',\n      author: '',\n      page: '',\n      image: '',\n      price: '',\n      description: ''\n    };\n  },\n\n  computed: { ...mapGetters(['allBooks']),\n\n    books() {\n      return this.allBooks;\n    },\n\n    nextIndex() {\n      return this.books.indexOf(this.books[this.books.length - 1]) + 1;\n    }\n\n  },\n  methods: { ...mapActions(['createNewBook']),\n\n    clearForm() {\n      this.title = '';\n      this.genre = '';\n      this.author = '';\n      this.page = '';\n      this.image = '';\n      this.price = '';\n      this.description = '';\n    },\n\n    submit() {\n      db.ref('books').child(this.nextIndex).set({\n        title: this.title,\n        genre: this.genre,\n        author: this.author,\n        page: this.page,\n        image: this.image,\n        price: this.price,\n        description: this.description\n      });\n      eventBus.$emit('update');\n      this.clearForm();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsCA;AACA;AACA;AACA;AAIA;EACAA;IAAAC;EAAA,CADA;;EAEAC;IACA;MACAC,MADA;MAEAC,SAFA;MAGAC,SAHA;MAIAC,UAJA;MAKAC,QALA;MAMAC,SANA;MAOAC,SAPA;MAQAC;IARA;EAUA,CAbA;;EAcAC,YACA,2BADA;;IAGAC;MACA;IACA,CALA;;IAOAC;MACA;IACA;;EATA,CAdA;EAyBAC,WACA,gCADA;;IAGAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAXA;;IAYAC;MACAC,sCACAC,GADA,CACA;QACAd,iBADA;QAEAC,iBAFA;QAGAC,mBAHA;QAIAC,eAJA;QAKAC,iBALA;QAMAC,iBANA;QAOAC;MAPA,CADA;MAUAS;MACA;IACA;;EAzBA;AAzBA","names":["components","GenresBook","data","id","title","genre","author","page","image","price","description","computed","books","nextIndex","methods","clearForm","submit","db","set","eventBus"],"sourceRoot":"src/components/children","sources":["NewBook.vue"],"sourcesContent":["<template>\n  <div class=\"header\">\n       <div class=\"main-div\">\n         <div><router-link to=\"/\">Home</router-link></div>\n         <div><router-link to=\"/list-page\">ListPage</router-link></div>\n         <form class=\"container\">\n           <el-input placeholder=\"Ведите название\" v-model=\"title\"></el-input>\n           <label class=\"label\">Ведите название</label>\n           <GenresBook />\n           <label class=\"label\">Ведите жанр</label>\n           <el-input placeholder=\"Ведите имя автора\" v-model=\"author\"></el-input>\n           <label class=\"label\">Ведите имя автора</label>\n           <el-input placeholder=\"Ведите количество страниц\" v-model=\"page\"></el-input>\n           <label class=\"label\">Ведите количество страниц</label>\n           <el-input placeholder=\"Добавить изображение обложки\" v-model=\"image\"></el-input>\n           <label class=\"label\">Добавить изображение обложки</label>\n           <el-input type=\"number\" placeholder=\"Цена\" v-model=\"price\"></el-input>\n           <label class=\"label\">Цена</label>\n           <el-input\n             type=\"textarea\"\n             :rows=\"3\"\n             placeholder=\"Краткое описание\"\n             v-model=\"description\"\n           />\n           <label class=\"label\">Краткое описание</label>\n           <el-button\n             class=\"btn\"\n             type=\"primary\"\n             plain\n             @click=\"submit\"\n           >Сохранить</el-button>\n         </form>\n       </div>\n  </div>\n</template>\n\n\n<script>\nimport {mapActions , mapGetters} from 'vuex'\nimport { db } from '@/services/db'\nimport GenresBook from \"@/components/children/GenresBook\";\nimport { eventBus }from '@/main'\n\n\n\nexport default {\n  components: {GenresBook},\n  data(){\n    return {\n      id: 10,\n      title: '',\n      genre: '',\n      author: '',\n      page: '',\n      image: '',\n      price: '',\n      description: '',\n    }\n  },\n  computed: {\n    ...mapGetters(['allBooks']),\n\n    books(){\n      return this.allBooks\n    },\n\n    nextIndex() {\n      return this.books.indexOf(this.books[this.books.length - 1]) + 1\n    },\n  },\n  methods:{\n    ...mapActions(['createNewBook']),\n\n    clearForm(){\n          this.title = ''\n          this.genre = ''\n          this.author = ''\n          this.page = ''\n          this.image = ''\n          this.price = ''\n          this.description = ''\n    },\n    submit(){\n      db.ref('books').child(this.nextIndex)\n          .set({\n            title: this.title,\n            genre: this.genre,\n            author: this.author,\n            page: this.page,\n            image: this.image,\n            price: this.price,\n            description: this.description,\n          })\n      eventBus.$emit('update');\n      this.clearForm();\n    },\n  },\n}\n\n\n</script>\n\n<style scoped>\n.btn{\n  width: auto;\n}\n.main-div{\n  height:  auto;\n  display: flex;\n  justify-content: center;\n}\n.container{\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  width: 400px;\n}\n.label{\n  text-align: left;\n  font-size: 15px;\n  margin-top: 10px;\n  margin-bottom: 15px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}