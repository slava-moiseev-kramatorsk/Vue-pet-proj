{"ast":null,"code":"import { mapActions, mapGetters } from 'vuex';\nimport { db } from '@/services/db';\nimport GenresBook from \"@/components/children/GenresBook\";\nimport { eventBus } from '@/main';\nexport default {\n  components: {\n    GenresBook\n  },\n  props: [],\n\n  data() {\n    return {\n      id: 10,\n      title: '',\n      author: '',\n      page: '',\n      image: '',\n      price: '',\n      genre: '',\n      description: ''\n    };\n  },\n\n  computed: { ...mapGetters(['allBooks']),\n\n    books() {\n      return this.allBooks;\n    },\n\n    nextIndex() {\n      return this.books.indexOf(this.books[this.books.length - 1]) + 1;\n    }\n\n  },\n  methods: { ...mapActions(['createNewBook']),\n\n    optionSelect(value) {\n      this.genre = value;\n      console.log(this.genre);\n    },\n\n    clearForm() {\n      this.title = '';\n      this.author = '';\n      this.page = '';\n      this.image = '';\n      this.price = '';\n      this.description = '';\n    },\n\n    submit() {\n      db.ref('books').child(this.nextIndex).set({\n        title: this.title,\n        genre: this.genre,\n        author: this.author,\n        page: this.page,\n        image: this.image,\n        price: this.price,\n        description: this.description\n      });\n      eventBus.$emit('update');\n      this.clearForm();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8CA;AACA;AACA;AACA;AAIA;EACAA;IAAAC;EAAA,CADA;EAEAC,SAFA;;EAIAC;IACA;MACAC,MADA;MAEAC,SAFA;MAGAC,UAHA;MAIAC,QAJA;MAKAC,SALA;MAMAC,SANA;MAOAC,SAPA;MAQAC;IARA;EAYA,CAjBA;;EAkBAC,YACA,2BADA;;IAGAC;MACA;IACA,CALA;;IAOAC;MACA;IACA;;EATA,CAlBA;EA6BAC,WACA,gCADA;;IAEAC;MACA;MACAC;IACA,CALA;;IAOAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAdA;;IAeAC;MACAC,sCACAC,GADA,CACA;QACAhB,iBADA;QAEAK,iBAFA;QAGAJ,mBAHA;QAIAC,eAJA;QAKAC,iBALA;QAMAC,iBANA;QAOAE;MAPA,CADA;MAUAW;MACA;IACA;;EA5BA;AA7BA","names":["components","GenresBook","props","data","id","title","author","page","image","price","genre","description","computed","books","nextIndex","methods","optionSelect","console","clearForm","submit","db","set","eventBus"],"sourceRoot":"src/components/children","sources":["NewBook.vue"],"sourcesContent":["<template>\n<div>\n        <div class=\"header\">\n          <div><router-link to=\"/\" class=\"link1\">Home</router-link></div>\n          <div><router-link to=\"/list-page\" class=\"link1\">ListPage</router-link></div>\n        </div>\n       <div class=\"main-div\">\n\n         <form class=\"form\">\n           <el-input placeholder=\"Ведите название\" v-model=\"title\"></el-input>\n           <label class=\"label\">Ведите название</label>\n           <GenresBook\n               @select=\"optionSelect\"\n           />\n           <label class=\"label\">Ведите жанр</label>\n           <el-input placeholder=\"Ведите имя автора\" v-model=\"author\"></el-input>\n           <label class=\"label\">Ведите имя автора</label>\n           <el-input placeholder=\"Ведите количество страниц\" v-model=\"page\"></el-input>\n           <label class=\"label\">Ведите количество страниц</label>\n           <el-input type=\"number\" placeholder=\"Цена\" v-model=\"price\"></el-input>\n           <label class=\"label\">Цена</label>\n           <el-input\n             type=\"textarea\"\n             :rows=\"3\"\n             placeholder=\"Краткое описание\"\n             v-model=\"description\"\n           /><label class=\"label\">Краткое описание</label>\n           <el-button type=\"primary\">Upload<i class=\"el-icon-upload el-icon-right\"></i></el-button>\n           <el-input\n               ref=\"fileUpload\" style=\"display: none\"\n           ></el-input>\n           <label class=\"label\">Добавить изображение обложки</label>\n\n           <el-button\n             class=\"btn\"\n             type=\"primary\"\n             plain\n             @click=\"submit\"\n           >Сохранить</el-button>\n         </form>\n       </div>\n</div>\n</template>\n\n\n<script>\nimport {mapActions , mapGetters} from 'vuex'\nimport { db } from '@/services/db'\nimport GenresBook from \"@/components/children/GenresBook\";\nimport { eventBus }from '@/main'\n\n\n\nexport default {\n  components: {GenresBook},\n  props:[\n  ],\n  data(){\n    return {\n      id: 10,\n      title: '',\n      author: '',\n      page: '',\n      image: '',\n      price: '',\n      genre:'',\n      description: '',\n\n      }\n\n  },\n  computed: {\n    ...mapGetters(['allBooks']),\n\n    books(){\n      return this.allBooks\n    },\n\n    nextIndex() {\n      return this.books.indexOf(this.books[this.books.length - 1]) + 1\n    },\n  },\n  methods:{\n    ...mapActions(['createNewBook']),\n    optionSelect(value){\n      this.genre = value\n      console.log(this.genre)\n    },\n\n    clearForm(){\n          this.title = ''\n          this.author = ''\n          this.page = ''\n          this.image = ''\n          this.price = ''\n          this.description = ''\n    },\n    submit(){\n      db.ref('books').child(this.nextIndex)\n          .set({\n            title: this.title,\n            genre: this.genre,\n            author: this.author,\n            page: this.page,\n            image: this.image,\n            price: this.price,\n            description: this.description,\n          })\n      eventBus.$emit('update');\n      this.clearForm();\n    },\n  },\n}\n\n\n</script>\n\n<style scoped>\n.btn{\n  width: auto;\n}\n.main-div{\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.form{\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  width: 400px;\n\n}\n.label{\n  text-align: left;\n  font-size: 15px;\n  margin-top: 10px;\n  margin-bottom: 15px;\n}\n.header{\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  justify-items: left;\n  align-items: center;\n  width: auto;\n  height: 70px;\n  background-color: steelblue;\n}\n.link1{\n  text-decoration: none;\n  color: aliceblue;\n  font-size: 25px;\n  font-family: fantasy, sans-serif;\n}\n</style>"]},"metadata":{},"sourceType":"module"}