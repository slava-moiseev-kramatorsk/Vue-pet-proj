{"ast":null,"code":"import { mapActions, mapGetters } from 'vuex';\nimport GenresBook from \"@/components/children/GenresBook\";\nexport default {\n  name: 'EditBook',\n  components: {\n    GenresBook\n  },\n  props: {\n    currentBook: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      newBook: {\n        title: '',\n        author: '',\n        page: '',\n        image: null,\n        price: '',\n        genre: '',\n        description: ''\n      },\n      clearBook: {\n        title: '',\n        author: '',\n        page: '',\n        image: null,\n        price: '',\n        genre: '',\n        description: ''\n      }\n    };\n  },\n\n  computed: { ...mapGetters(['allBooks', 'selected']),\n\n    books() {\n      return this.allBooks;\n    }\n\n  },\n  methods: { ...mapActions(['createNewBook']),\n\n    submit() {\n      this.createNewBook({\n        id: this.currentBook.id,\n        values: this.newBook\n      });\n      this.newBook = this.clearBook; // this.clearForm()\n    },\n\n    optionSelect(value) {\n      this.newBook.genre = value;\n    },\n\n    uploadImage() {// this.$refs.fileInput.click()\n    },\n\n    onFileChange(event) {\n      // const file = event.target.files[0];\n      //\n      // const reader = new FileReader();\n      // reader.onload = () => {\n      //   this.imageSrc = reader.result\n      // }\n      // reader.readAsDataURL(file)\n      // this.image = file\n      console.log(event);\n    },\n\n    clearForm() {\n      this.title = '';\n      this.author = '';\n      this.page = '';\n      this.price = '';\n      this.description = '';\n    }\n\n  },\n\n  // watch: {\n  //   currentBook: {\n  //     handler(val) {\n  //       if (val){\n  //         this.newBook = this.currentBook;\n  //       }\n  //       else\n  //       {\n  //         this.newBook = this.clearBook;\n  //       }\n  //     },\n  //     deep: true,\n  //   },\n  // },\n  created() {\n    this.newBook = this.currentBook;\n  }\n\n};","map":{"version":3,"mappings":"AAqDA;AACA;AAKA;EACAA,gBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IACAC;MACAC,YADA;MAEAC;IAFA;EADA,CAHA;;EASAC;IACA;MACAC;QACAC,SADA;QAEAC,UAFA;QAGAC,QAHA;QAIAC,WAJA;QAKAC,SALA;QAMAC,SANA;QAOAC;MAPA,CADA;MAUAC;QACAP,SADA;QAEAC,UAFA;QAGAC,QAHA;QAIAC,WAJA;QAKAC,SALA;QAMAC,SANA;QAOAC;MAPA;IAVA;EAoBA,CA9BA;;EAgCAE,YACA,uCADA;;IAGAC;MACA;IACA;;EALA,CAhCA;EAwCAC,WACA,gCADA;;IAEAC;MACA;QACAC,uBADA;QAEAC;MAFA;MAKA,8BANA,CAOA;IACA,CAVA;;IAYAC;MACA;IACA,CAdA;;IAgBAC,eACA;IACA,CAlBA;;IAoBAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEAC;IAEA,CAhCA;;IAkCAC;MACA;MACA;MACA;MACA;MACA;IACA;;EAxCA,CAxCA;;EAmFA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEAC;IACA;EACA;;AApGA","names":["name","components","GenresBook","props","currentBook","type","required","data","newBook","title","author","page","image","price","genre","description","clearBook","computed","books","methods","submit","id","values","optionSelect","uploadImage","onFileChange","console","clearForm","created"],"sourceRoot":"src/components/children","sources":["EditBook.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"header\">\n      <div><router-link to=\"/\" class=\"link1\">Home</router-link></div>\n      <div><router-link to=\"/list-page\" class=\"link1\">Весь список</router-link></div>\n    </div>\n    <div class=\"main-div\">\n\n      <form class=\"form\">\n        <el-input placeholder=\"Ведите название\" v-model=\"newBook.title\" ></el-input>\n        <label class=\"label\">Ведите название</label>\n        <GenresBook\n            :genre=\"newBook.genre\"\n            @choiceGenre=\"optionSelect\"\n        />\n        <label class=\"label\">Ведите жанр</label>\n        <el-input placeholder=\"Ведите имя автора\" v-model=\"newBook.author\"></el-input>\n        <label class=\"label\">Ведите имя автора</label>\n        <el-input placeholder=\"Ведите количество страниц\" v-model=\"newBook.page\"></el-input>\n        <label class=\"label\">Ведите количество страниц</label>\n        <el-input type=\"number\" placeholder=\"Цена\" v-model=\"newBook.price\"></el-input>\n        <label class=\"label\">Цена</label>\n        <el-input\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"Краткое описание\"\n            v-model=\"newBook.description\"\n        /><label class=\"label\">Краткое описание</label>\n        <el-button type=\"primary\" @click=\"uploadImage\">Загрузить<i class=\"el-icon-upload el-icon-right\" ></i></el-button>\n        <input\n            type=\"file\"\n            accept=\"images/*\"\n            ref=\"fileInput\"\n            style=\"display: none\"\n            @change=\"onFileChange\"\n        >\n        <label class=\"label\">Добавить изображение обложки</label>\n\n        <el-button\n            class=\"btn\"\n            type=\"primary\"\n            plain\n            @click=\"submit\"\n        >Сохранить</el-button>\n      </form>\n    </div>\n    <div>{{books.id}}</div>\n  </div>\n\n</template>\n\n\n<script>\nimport {mapActions , mapGetters} from 'vuex'\nimport GenresBook from \"@/components/children/GenresBook\";\n\n\n\n\nexport default {\n  name: 'EditBook',\n  components: {GenresBook},\n  props:{\n    currentBook: {\n      type: Object,\n      required: true,\n    },\n  },\n  data(){\n    return {\n      newBook: {\n        title: '',\n        author: '',\n        page: '',\n        image: null,\n        price: '',\n        genre: '',\n        description: '',\n      },\n      clearBook: {\n        title: '',\n        author: '',\n        page: '',\n        image: null,\n        price: '',\n        genre: '',\n        description: '',\n      },\n    }\n  },\n\n  computed: {\n    ...mapGetters(['allBooks', 'selected']),\n\n    books(){\n      return this.allBooks\n    },\n  },\n\n  methods:{\n    ...mapActions(['createNewBook']),\n    submit(){\n      this.createNewBook({\n        id: this.currentBook.id,\n        values: this.newBook,\n        \n      })\n      this.newBook = this.clearBook;\n      // this.clearForm()\n    },\n\n    optionSelect(value){\n      this.newBook.genre = value\n    },\n\n    uploadImage(){\n      // this.$refs.fileInput.click()\n    },\n\n    onFileChange(event){\n      // const file = event.target.files[0];\n      //\n      // const reader = new FileReader();\n      // reader.onload = () => {\n      //   this.imageSrc = reader.result\n      // }\n      // reader.readAsDataURL(file)\n      // this.image = file\n\n      console.log(event);\n\n    },\n\n    clearForm(){\n      this.title = ''\n      this.author = ''\n      this.page = ''\n      this.price = ''\n      this.description = ''\n    },\n  },\n\n  // watch: {\n  //   currentBook: {\n  //     handler(val) {\n  //       if (val){\n  //         this.newBook = this.currentBook;\n  //       }\n  //       else\n  //       {\n  //         this.newBook = this.clearBook;\n  //       }\n  //     },\n  //     deep: true,\n  //   },\n  // },\n\n  created(){\n    this.newBook = this.currentBook;\n  },\n}\n\n\n</script>\n\n<style scoped>\n.btn{\n  width: auto;\n}\n.main-div{\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.form{\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  width: 400px;\n\n}\n.label{\n  text-align: left;\n  font-size: 15px;\n  margin-top: 10px;\n  margin-bottom: 15px;\n}\n.header{\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  justify-items: left;\n  align-items: center;\n  width: auto;\n  height: 70px;\n  background-color: steelblue;\n}\n.link1{\n  text-decoration: none;\n  color: aliceblue;\n  font-size: 25px;\n  font-family: fantasy, sans-serif;\n}\n</style>"]},"metadata":{},"sourceType":"module"}