{"ast":null,"code":"import Vue from 'vue';\nimport merge from 'element-ui/src/utils/merge';\nimport PopupManager from 'element-ui/src/utils/popup/popup-manager';\nimport getScrollBarWidth from '../scrollbar-width';\nimport { getStyle, addClass, removeClass, hasClass } from '../dom';\nlet idSeed = 1;\nlet scrollBarWidth;\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    openDelay: {},\n    closeDelay: {},\n    zIndex: {},\n    modal: {\n      type: Boolean,\n      default: false\n    },\n    modalFade: {\n      type: Boolean,\n      default: true\n    },\n    modalClass: {},\n    modalAppendToBody: {\n      type: Boolean,\n      default: false\n    },\n    lockScroll: {\n      type: Boolean,\n      default: true\n    },\n    closeOnPressEscape: {\n      type: Boolean,\n      default: false\n    },\n    closeOnClickModal: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  beforeMount() {\n    this._popupId = 'popup-' + idSeed++;\n    PopupManager.register(this._popupId, this);\n  },\n\n  beforeDestroy() {\n    PopupManager.deregister(this._popupId);\n    PopupManager.closeModal(this._popupId);\n    this.restoreBodyStyle();\n  },\n\n  data() {\n    return {\n      opened: false,\n      bodyPaddingRight: null,\n      computedBodyPaddingRight: 0,\n      withoutHiddenClass: true,\n      rendered: false\n    };\n  },\n\n  watch: {\n    visible(val) {\n      if (val) {\n        if (this._opening) return;\n\n        if (!this.rendered) {\n          this.rendered = true;\n          Vue.nextTick(() => {\n            this.open();\n          });\n        } else {\n          this.open();\n        }\n      } else {\n        this.close();\n      }\n    }\n\n  },\n  methods: {\n    open(options) {\n      if (!this.rendered) {\n        this.rendered = true;\n      }\n\n      const props = merge({}, this.$props || this, options);\n\n      if (this._closeTimer) {\n        clearTimeout(this._closeTimer);\n        this._closeTimer = null;\n      }\n\n      clearTimeout(this._openTimer);\n      const openDelay = Number(props.openDelay);\n\n      if (openDelay > 0) {\n        this._openTimer = setTimeout(() => {\n          this._openTimer = null;\n          this.doOpen(props);\n        }, openDelay);\n      } else {\n        this.doOpen(props);\n      }\n    },\n\n    doOpen(props) {\n      if (this.$isServer) return;\n      if (this.willOpen && !this.willOpen()) return;\n      if (this.opened) return;\n      this._opening = true;\n      const dom = this.$el;\n      const modal = props.modal;\n      const zIndex = props.zIndex;\n\n      if (zIndex) {\n        PopupManager.zIndex = zIndex;\n      }\n\n      if (modal) {\n        if (this._closing) {\n          PopupManager.closeModal(this._popupId);\n          this._closing = false;\n        }\n\n        PopupManager.openModal(this._popupId, PopupManager.nextZIndex(), this.modalAppendToBody ? undefined : dom, props.modalClass, props.modalFade);\n\n        if (props.lockScroll) {\n          this.withoutHiddenClass = !hasClass(document.body, 'el-popup-parent--hidden');\n\n          if (this.withoutHiddenClass) {\n            this.bodyPaddingRight = document.body.style.paddingRight;\n            this.computedBodyPaddingRight = parseInt(getStyle(document.body, 'paddingRight'), 10);\n          }\n\n          scrollBarWidth = getScrollBarWidth();\n          let bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n          let bodyOverflowY = getStyle(document.body, 'overflowY');\n\n          if (scrollBarWidth > 0 && (bodyHasOverflow || bodyOverflowY === 'scroll') && this.withoutHiddenClass) {\n            document.body.style.paddingRight = this.computedBodyPaddingRight + scrollBarWidth + 'px';\n          }\n\n          addClass(document.body, 'el-popup-parent--hidden');\n        }\n      }\n\n      if (getComputedStyle(dom).position === 'static') {\n        dom.style.position = 'absolute';\n      }\n\n      dom.style.zIndex = PopupManager.nextZIndex();\n      this.opened = true;\n      this.onOpen && this.onOpen();\n      this.doAfterOpen();\n    },\n\n    doAfterOpen() {\n      this._opening = false;\n    },\n\n    close() {\n      if (this.willClose && !this.willClose()) return;\n\n      if (this._openTimer !== null) {\n        clearTimeout(this._openTimer);\n        this._openTimer = null;\n      }\n\n      clearTimeout(this._closeTimer);\n      const closeDelay = Number(this.closeDelay);\n\n      if (closeDelay > 0) {\n        this._closeTimer = setTimeout(() => {\n          this._closeTimer = null;\n          this.doClose();\n        }, closeDelay);\n      } else {\n        this.doClose();\n      }\n    },\n\n    doClose() {\n      this._closing = true;\n      this.onClose && this.onClose();\n\n      if (this.lockScroll) {\n        setTimeout(this.restoreBodyStyle, 200);\n      }\n\n      this.opened = false;\n      this.doAfterClose();\n    },\n\n    doAfterClose() {\n      PopupManager.closeModal(this._popupId);\n      this._closing = false;\n    },\n\n    restoreBodyStyle() {\n      if (this.modal && this.withoutHiddenClass) {\n        document.body.style.paddingRight = this.bodyPaddingRight;\n        removeClass(document.body, 'el-popup-parent--hidden');\n      }\n\n      this.withoutHiddenClass = true;\n    }\n\n  }\n};\nexport { PopupManager };","map":{"version":3,"names":["Vue","merge","PopupManager","getScrollBarWidth","getStyle","addClass","removeClass","hasClass","idSeed","scrollBarWidth","props","visible","type","Boolean","default","openDelay","closeDelay","zIndex","modal","modalFade","modalClass","modalAppendToBody","lockScroll","closeOnPressEscape","closeOnClickModal","beforeMount","_popupId","register","beforeDestroy","deregister","closeModal","restoreBodyStyle","data","opened","bodyPaddingRight","computedBodyPaddingRight","withoutHiddenClass","rendered","watch","val","_opening","nextTick","open","close","methods","options","$props","_closeTimer","clearTimeout","_openTimer","Number","setTimeout","doOpen","$isServer","willOpen","dom","$el","_closing","openModal","nextZIndex","undefined","document","body","style","paddingRight","parseInt","bodyHasOverflow","documentElement","clientHeight","scrollHeight","bodyOverflowY","getComputedStyle","position","onOpen","doAfterOpen","willClose","doClose","onClose","doAfterClose"],"sources":["/home/work/PhpstormProjects/hello-world/node_modules/element-ui/src/utils/popup/index.js"],"sourcesContent":["import Vue from 'vue';\nimport merge from 'element-ui/src/utils/merge';\nimport PopupManager from 'element-ui/src/utils/popup/popup-manager';\nimport getScrollBarWidth from '../scrollbar-width';\nimport { getStyle, addClass, removeClass, hasClass } from '../dom';\n\nlet idSeed = 1;\n\nlet scrollBarWidth;\n\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    openDelay: {},\n    closeDelay: {},\n    zIndex: {},\n    modal: {\n      type: Boolean,\n      default: false\n    },\n    modalFade: {\n      type: Boolean,\n      default: true\n    },\n    modalClass: {},\n    modalAppendToBody: {\n      type: Boolean,\n      default: false\n    },\n    lockScroll: {\n      type: Boolean,\n      default: true\n    },\n    closeOnPressEscape: {\n      type: Boolean,\n      default: false\n    },\n    closeOnClickModal: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  beforeMount() {\n    this._popupId = 'popup-' + idSeed++;\n    PopupManager.register(this._popupId, this);\n  },\n\n  beforeDestroy() {\n    PopupManager.deregister(this._popupId);\n    PopupManager.closeModal(this._popupId);\n\n    this.restoreBodyStyle();\n  },\n\n  data() {\n    return {\n      opened: false,\n      bodyPaddingRight: null,\n      computedBodyPaddingRight: 0,\n      withoutHiddenClass: true,\n      rendered: false\n    };\n  },\n\n  watch: {\n    visible(val) {\n      if (val) {\n        if (this._opening) return;\n        if (!this.rendered) {\n          this.rendered = true;\n          Vue.nextTick(() => {\n            this.open();\n          });\n        } else {\n          this.open();\n        }\n      } else {\n        this.close();\n      }\n    }\n  },\n\n  methods: {\n    open(options) {\n      if (!this.rendered) {\n        this.rendered = true;\n      }\n\n      const props = merge({}, this.$props || this, options);\n\n      if (this._closeTimer) {\n        clearTimeout(this._closeTimer);\n        this._closeTimer = null;\n      }\n      clearTimeout(this._openTimer);\n\n      const openDelay = Number(props.openDelay);\n      if (openDelay > 0) {\n        this._openTimer = setTimeout(() => {\n          this._openTimer = null;\n          this.doOpen(props);\n        }, openDelay);\n      } else {\n        this.doOpen(props);\n      }\n    },\n\n    doOpen(props) {\n      if (this.$isServer) return;\n      if (this.willOpen && !this.willOpen()) return;\n      if (this.opened) return;\n\n      this._opening = true;\n\n      const dom = this.$el;\n\n      const modal = props.modal;\n\n      const zIndex = props.zIndex;\n      if (zIndex) {\n        PopupManager.zIndex = zIndex;\n      }\n\n      if (modal) {\n        if (this._closing) {\n          PopupManager.closeModal(this._popupId);\n          this._closing = false;\n        }\n        PopupManager.openModal(this._popupId, PopupManager.nextZIndex(), this.modalAppendToBody ? undefined : dom, props.modalClass, props.modalFade);\n        if (props.lockScroll) {\n          this.withoutHiddenClass = !hasClass(document.body, 'el-popup-parent--hidden');\n          if (this.withoutHiddenClass) {\n            this.bodyPaddingRight = document.body.style.paddingRight;\n            this.computedBodyPaddingRight = parseInt(getStyle(document.body, 'paddingRight'), 10);\n          }\n          scrollBarWidth = getScrollBarWidth();\n          let bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n          let bodyOverflowY = getStyle(document.body, 'overflowY');\n          if (scrollBarWidth > 0 && (bodyHasOverflow || bodyOverflowY === 'scroll') && this.withoutHiddenClass) {\n            document.body.style.paddingRight = this.computedBodyPaddingRight + scrollBarWidth + 'px';\n          }\n          addClass(document.body, 'el-popup-parent--hidden');\n        }\n      }\n\n      if (getComputedStyle(dom).position === 'static') {\n        dom.style.position = 'absolute';\n      }\n\n      dom.style.zIndex = PopupManager.nextZIndex();\n      this.opened = true;\n\n      this.onOpen && this.onOpen();\n\n      this.doAfterOpen();\n    },\n\n    doAfterOpen() {\n      this._opening = false;\n    },\n\n    close() {\n      if (this.willClose && !this.willClose()) return;\n\n      if (this._openTimer !== null) {\n        clearTimeout(this._openTimer);\n        this._openTimer = null;\n      }\n      clearTimeout(this._closeTimer);\n\n      const closeDelay = Number(this.closeDelay);\n\n      if (closeDelay > 0) {\n        this._closeTimer = setTimeout(() => {\n          this._closeTimer = null;\n          this.doClose();\n        }, closeDelay);\n      } else {\n        this.doClose();\n      }\n    },\n\n    doClose() {\n      this._closing = true;\n\n      this.onClose && this.onClose();\n\n      if (this.lockScroll) {\n        setTimeout(this.restoreBodyStyle, 200);\n      }\n\n      this.opened = false;\n\n      this.doAfterClose();\n    },\n\n    doAfterClose() {\n      PopupManager.closeModal(this._popupId);\n      this._closing = false;\n    },\n\n    restoreBodyStyle() {\n      if (this.modal && this.withoutHiddenClass) {\n        document.body.style.paddingRight = this.bodyPaddingRight;\n        removeClass(document.body, 'el-popup-parent--hidden');\n      }\n      this.withoutHiddenClass = true;\n    }\n  }\n};\n\nexport {\n  PopupManager\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}